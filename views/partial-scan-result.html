<!--partial-scan-result.html-->

<section ng-show="vm.errMsg">
    <div layout="row" layout-margin layout-fill layout-padding class="err rounded-corner">
        <div flex>
            <h2> {{vm.current_order.orderid}} {{vm.errMsg}}</h2>
        </div>
    </div>
    <div layout="column" layout-fill layout-align="center center">
        <md-button class="md-raised middleButton" ng-click="vm.change_state('settings')">
            <h3>OK</h3>
        </md-button>
    </div>
</section>
<div layout="row" layout-wrap layout-padding id="mainbody" ng-hide="vm.errMsg || vm.displayIndicator" style="height:630px">
    <div flex="50">

            <md-content flex>


                <md-list>
                    <md-list-item class="md-2-line">
                        <div class="md-list-item-text">
                            <h2>{{vm.current_order.orderid}}</h2>
                            <h3>Order ID</h3>
                         </div>
                        <md-divider></md-divider>
                    </md-list-item>
                    <md-list-item class="md-2-line">
                        <div class="md-list-item-text">
                            <h2>{{vm.current_order.ordertype}}</h2>
                            <h3>Order Type</h3>
                        </div>
                        <md-divider></md-divider>
                    </md-list-item>
                    <md-list-item class="md-2-line">
                        <div class="md-list-item-text">
                            <h2>{{vm.current_order.source}}</h2>
                            <h3>Order Source</h3>
                        </div>
                        <md-divider></md-divider>
                    </md-list-item>
                    <md-list-item class="md-2-line">
                        <div class="md-list-item-text">
                            <h2>{{vm.current_order.orthotist}}</h2>
                            <h3>Orthotist</h3>
                        </div>
                        <md-divider></md-divider>
                    </md-list-item>
                    <md-list-item class="md-2-line">
                        <div class="md-list-item-text">
                            <h2>{{vm.current_order.customer}}</h2>
                            <h3>Customer</h3>
                        </div>

                    </md-list-item>
                    <md-divider ng-show="vm.current_order.sketch"></md-divider>
                    <md-list-item class="md-2-line" ng-show="vm.current_order.sketch">
                        <div class="md-list-item-text">
                            <h2>{{vm.current_order.sketch}}</h2>
                            <h3>Sketch</h3>
                        </div>

                    </md-list-item>

                </md-list>
            </md-content>


    </div>
    <div flex="50" style="max-height: 600px;overflow: auto">

            <table class="result-table" cellpadding="7" cellspacing="0" width="95%">
                <tr>
                    <td width="200">&nbsp;</td>
                    <td width="100">In</td>
                    <td width="100">Out</td>
                    <td width="100">Count</td>
                </tr>
                <tr ng-repeat="stages in vm.current_order.stageInformation"
                    ng-class="(vm.current_order.currentStage===stages.stageKey) ? 'curr-bordered' :(stages.in!=='') ? 'succ-bordered' : ''"
                    style="height: 1.9em">
                    <td style="font-weight:bold;text-align: right"><img src="/assets/images/hand.png"
                                                                                        ng-if="stages.onhold"/>
                        {{stages.stageName}}
                        <span ng-if="stages.onhold"> (On Hold)</span></td>
                    <td align="center"> {{stages.in}}</td>
                    <td align="center"> {{stages.out}}</td>
                    <td align="center"> {{stages.count}}</td>
                </tr>
            </table>

    </div>
</div>



<div layout="row" layout-margin layout-fill layout-padding ng-hide="vm.errMsg || vm.displayIndicator" style="background-color: black;color:white;bottom:50px">
    <div flex ng-show="vm.hasButton('in')">
        <!-- <md-button ng-show="stageStatus==='in' || inoutButtons==='in'" ng-click="scanIn(item.orderid)"
                    class="md-raised md-primary full-width succ">-->
        <md-button ng-click="vm.sendCommand('in')"
                   class="md-raised md-primary partial-width">
            <h3>Confirm Order In
                <ng-md-icon icon="done" class="fill-white button-icon-padding" size="24px"></ng-md-icon>
            </h3>
        </md-button>
    </div>
    <!--<div flex ng-show="vm.hasButton('out')">
        <md-button ng-click="vm.sendCommand('out',vm.outDepartment)"
                   class="md-raised partial-width" ng-disabled="!vm.outDepartment">
            <h3 ng-show="vm.outDepartment">Confirm Order Out to >>></h3>

            <h3 ng-show="!vm.outDepartment">Select Department First >> </h3>
        </md-button>

    </div>
    <div flex ng-show="vm.hasButton('out')">
        <md-select ng-model="vm.outDepartment" required class="outDepartment">
            <md-option
                    ng-repeat="item in vm.settings.departments | filter:vm.filterFn | filter:vm.filterCurrentDepartment | filter:vm.filterRemoveDispatch"
                    value="{{item.stage}}">{{item.stage}}
            </md-option>
        </md-select>
    </div>-->
    <div flex="10" ng-show="vm.hasButton('out')">
        <h3>Next Department</h3>
        <ng-md-icon class="button-icon-padding" icon="forward" size="64" style="fill: #fff"></ng-md-icon>
    </div>
    <div flex="60" ng-show="vm.hasButton('out')">

        <md-button class="md-raised md-accent" ng-repeat="items in vm.settings.departments | filter:vm.filterFn | filter:vm.filterCurrentDepartment | filter:vm.filterRemoveDispatch"
                   ng-click="vm.sendCommand('out',items.stage)"
                   >
            <h3 style="margin: 20px 30px;">{{items.stage}}</h3>
        </md-button>

    </div>



    <div  flex style="text-align: center" >
        <md-button ng-show="vm.hasButton('finaldispatch')" ng-click="vm.sendCommand('out','finaldispatch')"
                   class="md-raised partial-width blue-button">
            <h3>Final Despatch</h3>
        </md-button>

        <md-button ng-show="vm.hasButton('roughfittingdispatch')" ng-click="vm.sendCommand('out','roughfittingdispatch')"
                   class="md-raised partial-width blue-button">
            <h3>Rough Fitting Despatch</h3>
        </md-button>

        <md-button ng-show="vm.hasButton('outreject')" ng-click="vm.sendCommand('out','dispatch')"
                   class="md-raised md-success partial-width blue-button" >
            <h3>Send To Despatch</h3>
        </md-button>
        <md-button ng-show="vm.hasButton('onhold')" ng-click="vm.sendCommand('onhold')"
                   class="md-raised partial-width ">

            <h3><ng-md-icon icon="pan_tool" class="fill-black button-icon-padding" size="24px"></ng-md-icon> On Hold</h3>
        </md-button>
        <md-button ng-show="vm.hasButton('makeactive')" ng-click="vm.sendCommand('makeactive')"
                   class="md-raised partial-width">
            <h3>Remove Hold</h3>
        </md-button>
        <md-button ng-click="vm.change_state('scan home')"
                   class="md-raised md-warn partial-width">
            <h3>Cancel</h3>
        </md-button>
    </div>

</div>






